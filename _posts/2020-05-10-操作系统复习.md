---
layout:     post
title:      操作系统复习
subtitle:   
date:       2020-05-10
author:     AspenStars
header-img: img/post-bg-map.jpg
catalog: true
tags:
    - 操作系统
    - 基础知识
---

# 操作系统

## 一、引论
计算机系统由硬件和软件组成

操作系统是配置在计算机硬件上的第一层软件（这一层里实际上又是多层系统软件，一层一层抽象，隐藏对硬件的操作细节），是对硬件系统的首次扩充

### 1.1 目标和作用

根据应用环境确定目标
- 查询系统：响应时间
- 实时系统、武器控制：实时性和可靠性

配置操作系统的目标
- 有效性
    - 提高资源利用率
    - 提高系统吞吐量 
- 方便性：易学易用，图形界面
- 可扩充性：微内核结构、客户服务器模式
- 开放性：遵守接口规范

操作系统的作用
![OS 作为接口的示意图](/img/post/os1.1.png)
- 作为用户与计算机硬件系统之间的接口：OS 处于用户与计算机硬件系统之间，用户通过 OS 来使用计算机系统
    - 命令方式
    - 系统调用方式
    - 图形、窗口方式
- **作为计算机系统资源的管理者**
    - 处理器
    - 存储器
    - I/O设备
    - 信息（数据文件和程序）
- 实现对计算机资源的抽象

### 1.2 发展过程
作业：即系统中各种应用程序的任务，有计算型、I/O型等等

1. 无操作系统（纸带打孔，卡片输入）
    - 人工操作
        - 单用户独占全机
        - CPU等待用户操作
    - 脱机输入/输出方式
        - 减少了CPU等待时间
        - 提高了I/O速度（直接从高速的磁带、磁盘上读取）
2. 单道批处理系统
    a. 最早的一种操作系统  
    b. 批处理系统旨在提高系统资源的利用率和系统吞吐量  
    c. 把一批作业以脱机 方式输入到磁带上，并在系统中配上监督程序(Monitor)，在它的控制下使这批作业能一个 接一个地连续处理  
    - 自动性
    - 顺序性
    - 单道性
3. 多道批处理系统
    所有作业都存放在外存，通过调度算法调入内存，共享CPU和系统资源
    - 提高CPU的利用率（一个等待I/O时，交替运行其他作业)
    - 提高内存和I/O设备利用率（大部分作业属于中小型）
    - 增加系统吞吐量
    优缺点
    - 资源利用率高
    - 系统吞吐量大
    - 平均周转时间长：要排队依次处理
    - 无交互能力：交给系统后，用户无法控制
4. 分时系统
    满足人机交互、共享主机、便于上机。作业应**直接进入内存**，引入时间片，每个时间片转换作业任务
    - 多路性
    - 独立性
    - 及时性
    - 交互性
5. 实时系统
    系统能够**及时响应**外部事件的请求，并在**规定的时间内完成处理**，控制所有实时任务协调  
    实时任务分类
    - 硬实时：必须满足任务截止时间的要求，否则后果难以预料
    - 软实时：错过截止时间影响也不大

### 1.3 基本特性
并发、共享、虚拟、异步，后三个都是以并发为基础

1. 并发性
    两个或多个时间在同一时间间隔内发生（一段时间内），在一段事件内宏观上同时运行，但微观上每一时刻只有一个程序在运行（并行系统除外）
    - 并行性：两个或多个事件在同一时刻发生（时间点）
    - 进程和线程：
        - 进程：是分类资源的基本单位
        - 线程：独立运行和独立调度的基本单位。引入的原因是进程调度的开销很大，提高多个程序间并发执行的程度
2. 共享性
    资源可供内存中多个并发执行的进程（线程）共同使用
    - 互斥共享：打印机等物理设备、临界资源
    - 同时访问：磁盘、可同时写入的文件
3. 虚拟技术
    将一个物理实体变为若干个逻辑上的对应物
    - 时分复用技术：分时使用
        - 虚拟处理机技术：多道程序技术，为每道程序建立一个进程，并发执行
        - 虚拟设备技术：将一台物理设备变为多台逻辑设备，“同时”操作
    -空分复用技术：
        - 虚拟磁盘：磁盘分盘
        - 虚拟存储器：内存可同时存放多个程序
4. 异步性
    进程以用户不可预知的方式推进，很可能每一次执行的顺序都不相同

### 1.4 主要功能
1. 处理机管理
    进程和线程管理
    - 进程控制：分配资源、回收资源、控制进程（线程）状态的转换
    - 进程同步：为多个进程（线程）的运行进行协调
        - 进程互斥
        - 进程同步
    - 进程通信：交换信息
    - 调度
        - 作业调度：从后备队列选出作业，分配资源，建立进程
        - 进程调度：从进程就绪队列中，选出进程，分配处理机

2. 存储器管理
    - 内存分配：动态、静态分配
    - 内存保护：只能访问自己的内存空间
    - 地址映射：逻辑地址到物理地址
    - 内存扩充：虚拟内存技术
        - 请求调入
        - 置换

3. 设备管理
    主要是I/O相关的管理
    - 缓冲管理
    - 设备分配
    - 设备处理

4. 文件管理
    - 文件存储空间管理
    - 目录管理
    - 文件的读写管理和保护

5. 操作系统与用户之间的接口
    - 用户接口：用户直接取得系统服务
    - 程序接口：程序员编程时使用的接口，用于程序取得系统服务

### 1.5 微内核操作系统

缺点：
- 效率降低：一次服务请求至少四次上下文切换。
    - 第一次是发生在客户发送请求消息给内核， 以请求取得某服务器特定的服务时；
    - 第二次是发生在由内核把客户的请求消息发往服务器时；
    - 第三次是当服务器完成客户请求后，把响应消息发送到内核时；
    - 第四次是在内核将响 应消息发送给客户时




